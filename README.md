# FloatingLayer
小米等rom开启悬浮窗需要权限，这个操作对用户很不友好。

本应用实现的是应用内悬浮窗，当应用在前台时可以一直显示悬浮窗，且不需要权限。
## 原理
### Android窗口机制
Android的视图都是通过窗口来实现的，Framework定义了三种窗口类型，三种类型的定义在WindowManager类中。
+ 第一种是应用窗口。所谓的应用窗口一般是指该窗口对应一个Activity，由于加载Activity是由AmS完成的，因此对于应用程序来讲，要创建一个应用类窗口，只能在Activity内部完成。
+ 第二种是子窗口。所谓的子窗口是指，该窗口必须有一个父窗口，父窗口可以是一个应用类型窗口，也可以是任何其他类型的窗口。
+ 第三类是系统窗口。系统窗口不需要对应任何Activity，也不需要父窗口。对于应用程序而言，理论上是无法创建系统窗口的，因为所有的应用程序都没有这个权限，然而系统进程却可以创建系统窗口。
	
 WindowManager类对这三种类型进行了细化，把每一种类型都用一个int常量表示，这些实际上代表了窗口对应的层(Layer)。WmS在进行窗口叠加时，会按照该int常量的大小分配不同层，int值越大，代表层的位置越靠上面，即所谓的z-order。
	由此我们可以通过设置不同类型的窗口，调整浮层在z轴上显示的位置，以此达到我们想要的效果。
